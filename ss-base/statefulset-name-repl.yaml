apiVersion: kustomize.config.k8s.io/v1beta1
kind: Replacement
source:
  kind: ConfigMap
  name: kustomize-meta
  fieldPath: data.name
targets:
  - select:
      kind: StatefulSet
      labelSelector: app.kubernetes.io/managed-by=kustomize-ss-base
    fieldPaths:
      - metadata.name
      - metadata.labels.[app.kubernetes.io/name]
      - spec.serviceName
      - spec.selector.matchLabels.[app.kubernetes.io/name]
      - spec.template.metadata.labels.[app.kubernetes.io/name]
      - spec.template.spec.containers.[name=_].name

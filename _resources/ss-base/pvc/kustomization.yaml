apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component
replacements:
  - path: statefulset-volume-repl.yaml
patches:
  - target:
      kind: StatefulSet
      labelSelector: app.kubernetes.io/managed-by=kustomize-ss-base
    patch: |
      - op: add
        path: /spec/volumeClaimTemplates/-
        value:
          metadata:
            name: data
          spec:
            accessModes: [ "ReadWriteOnce" ]
            resources:
              requests:
                storage: 2Gi
